# 小说阅读系统启动文档

## 项目结构

```
web-xiaoshuo/
├── backend/          # Go后端项目
└── frontend/         # Vue.js前端项目
```

## 环境要求

### 后端 (Go)
- Go 1.19+
- MySQL 5.7+
- Redis

### 前端 (Vue.js)
- Node.js 16+
- npm 或 yarn

## 数据库配置

在启动项目前，请确保MySQL和Redis服务已启动，并根据 `backend/config/config.yaml` 中的配置创建数据库：

```yaml
database:
  host: "192.168.3.3"
  port: "3306"
  user: "root"
  password: "Ld588588"
  dbname: "xiaoshuo"
  charset: "utf8mb4"

redis:
  addr: "192.168.3.3:6379"
  password: ""
  db: 0
```

## Windows 启动步骤

### 1. 启动后端服务

打开命令提示符或PowerShell，进入backend目录：

```bash
cd backend
go mod tidy
go run main.go
```

服务将启动在 `http://localhost:8080`

### 2. 启动前端服务

打开另一个命令提示符或PowerShell窗口，进入frontend目录：

```bash
cd frontend
npm install
npm run dev
```

前端开发服务器将启动在 `http://localhost:3000`

## Linux 启动步骤

### 1. 启动后端服务

```bash
cd backend
go mod tidy
go run main.go
```

服务将启动在 `http://localhost:8080`

### 2. 启动前端服务

在另一个终端窗口中：

```bash
cd frontend
npm install
npm run dev
```

前端开发服务器将启动在 `http://localhost:3000`

## 生产环境部署

### 构建前端

```bash
cd frontend
npm run build
```

构建后的文件将生成在 `frontend/dist/` 目录

### 运行后端服务

```bash
cd backend
go build -o server .
./server
```

## 常见问题

1. **端口被占用**
   - 检查8080（后端）和3000（前端）端口是否被其他程序占用
   - 可在 `backend/config/config.yaml` 中修改后端端口
   - 可在 `frontend/vite.config.js` 中修改前端端口

2. **数据库连接失败**
   - 确保MySQL服务已启动
   - 检查 `backend/config/config.yaml` 中的数据库配置

3. **Redis连接失败**
   - 确保Redis服务已启动
   - 检查 `backend/config/config.yaml` 中的Redis配置

## API代理配置

前端项目已配置API代理，所有 `/api` 开头的请求将被代理到 `http://localhost:8080`，无需额外配置。